"use strict";(self.webpackChunkbus_reservation=self.webpackChunkbus_reservation||[]).push([[891],{3891:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var n=s(1369),a=s(5294),r=s(2791);const i=JSON.parse('{"data":{"bus_details":{"number":"123456789"},"seats":[{"type":"lower","number":"01","status":"confirmed"},{"type":"lower","number":"02","status":"confirmed"},{"type":"upper","number":"03","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"available"},{"type":"lower","number":"0","status":"available"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"upper","number":"0","status":"confirmed"},{"type":"lower","number":"0","status":"confirmed"},{"type":"lower","number":"30","status":"confirmed"},{"type":"upper","number":"31","status":"confirmed"},{"type":"upper","number":"32","status":"confirmed"}]}}');var l=s(3120),o=s(2504),c=s(3971),u=s(184);const d=(0,l.b)({container:{flexDirection:"column",background:"aliceblue",flexWrap:"wrap",width:"40%",top:"30%",right:"30%",position:"fixed",alignContent:"center",height:300,display:"flex",borderRadius:3,padding:10,justifyContent:"center"},actionContainer:{flexDirection:"row",display:"flex",justifyContent:"center"},fields:{flexDirection:"column",display:"flex",padding:10,width:"80%",alignContent:"center"},input:{height:25,margin:5},label:{margin:5}}),m=e=>{const[t,s]=(0,r.useState)(),n=(e,n)=>{let a=t;a={...a,[e]:n},s(a)};return(0,u.jsxs)("div",{className:d.container,children:[(0,u.jsxs)("div",{className:d.fields,children:[(0,u.jsx)("label",{htmlFor:"first-name-booking",className:d.label,children:"First Name"}),(0,u.jsx)("input",{id:"first-name-booking",onChange:e=>n("first_name",e.target.value),className:d.input}),(0,u.jsx)("label",{htmlFor:"last-name-booking",className:d.label,children:"Last Name"}),(0,u.jsx)("input",{id:"first-name-booking",onChange:e=>n("last_name",e.target.value),className:d.input}),(0,u.jsx)("label",{htmlFor:"email-booking",className:d.label,children:"Email"}),(0,u.jsx)("input",{id:"email-booking",onChange:e=>n("email",e.target.value),className:d.input})]}),(0,u.jsxs)("div",{className:d.actionContainer,children:[(0,u.jsx)(c.Z,{onClick:()=>e.onSubmit(t),children:"Book"}),(0,u.jsx)(c.Z,{onClick:e.onCancel,children:"Cancel"})]})]})},p=(0,l.b)({container:{display:"flex",flexDirection:"row",width:"50%",height:400,background:"floralwhite",borderRadius:3,boxShadow:"3px 3px 3px gray"},busHandle:{display:"flex",width:"100%",boxShadow:"3px 0px 1px grey",borderRight:"1px solid black",height:"100%"}}),b=(0,l.b)({container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"ghostwhite",padding:10},reservationText:{background:"red",margin:"10px 0px 5px 0px",padding:10,borderRadius:3},headerText:{padding:10,margin:5,fontSize:24,fontWeight:600},busContainer:{width:"50%"}}),h=(0,l.b)({container:{height:50,width:100,display:"flex",justifyContent:"space-around",borderRadius:3,flexDirection:"row"},head:{width:15,height:30},backSeat:{height:"100px !important",width:"50px !important",borderRadius:3,flexDirection:"column"},backSeatHead:{width:30,height:15}}),x=e=>{var t,s;const n="confirmed"==(null===(t=e.seat)||void 0===t?void 0:t.status)?"darkseagreen":"gray";return(0,u.jsxs)("div",{className:e.className,style:{background:n,margin:5,padding:5,display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:e.onClick,children:[(0,u.jsx)("text",{children:null===(s=e.seat)||void 0===s?void 0:s.number}),(0,u.jsx)("div",{className:e.headClass,style:{display:"flex",marginLeft:5,border:"1px solid black",borderRadius:3,alignItems:"center",background:"darkslategrey"}})]})},f=e=>(0,u.jsxs)("div",{className:p.container,style:{},children:[(0,u.jsx)("div",{style:{width:"10%"},children:"lower"===e.deckType&&(0,u.jsx)("div",{className:p.busHandle})}),(0,u.jsxs)("div",{style:{width:"80%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:10},children:e.seats.map(((t,s)=>{if(s<5)return(0,u.jsx)(x,{seat:t,onClick:e.onClick,className:h.container,headClass:h.head})}))}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:e.seats.map(((t,s)=>{if(s>=5&&s<10)return(0,u.jsx)(x,{seat:t,onClick:e.onClick,className:h.container,headClass:h.head})}))}),(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:100},children:e.seats.map(((t,s)=>{if(s>=10&&s<15)return(0,u.jsx)(x,{seat:t,onClick:e.onClick,className:h.container,headClass:h.head})}))})]}),(0,u.jsx)("div",{style:{width:"10%",display:"flex",alignItems:"center"},children:(0,u.jsx)(x,{seat:e.seats[e.seats.length-1],onClick:e.onClick,className:h.backSeat,headClass:h.backSeatHead})})]}),y=()=>{const[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)({number:""}),[c,d]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),x=(0,r.useRef)({type:"",number:"",status:""});(0,r.useEffect)((()=>{(async()=>{const e=i;t(e.data.seats),l(e.data.bus_details)})()}),[c]);const y=e=>{x.current=e,h(!0)};return(0,u.jsxs)("div",{className:b.container,children:[(0,u.jsx)(o.$,{onBusSelect:e=>{d(e)},containerClass:b.busContainer}),(0,u.jsx)("span",{className:b.reservationText,children:"Click on avaliable seats to make a reservation."}),(0,u.jsx)("span",{className:b.headerText,children:"Lower Deck"}),(0,u.jsx)(f,{deckType:"lower",seats:e.slice(0,e.length/2),onClick:e=>y(e.target.value)}),(0,u.jsx)("span",{className:b.headerText,children:"Upper Deck"}),(0,u.jsx)(f,{deckType:"upper",seats:e.slice(e.length/2,e.length),onClick:e=>y(e.target.value)}),(0,u.jsx)(n.Z,{open:p,children:(0,u.jsx)(m,{onSubmit:async e=>{try{200==(await a.Z.post("make reservation",{...e,bus_number:s.number,seat_number:x.current.number})).status&&h(!1)}catch(t){console.log("Error occurred while making a resevation",t)}},onCancel:()=>{h(!1)}})})]})}},2504:(e,t,s)=>{s.d(t,{$:()=>o});var n=s(2791);const a=JSON.parse('[{"number":"123456789"},{"number":"123456788"},{"number":"123456787"}]');var r=s(3120),i=s(184);const l=(0,r.b)({container:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-around",height:100,alignItems:"center",background:"floralwhite",borderRadius:3,margin:10},label:{fontWeight:600,textDecoration:"underline"}}),o=e=>{const[t,s]=(0,n.useState)([{number:""}]);(0,n.useEffect)((()=>{(async()=>{s(a)})()}));return(0,i.jsxs)("div",{className:"".concat(l.container," ").concat(e.containerClass),children:[(0,i.jsx)("label",{className:l.label,htmlFor:"bus-menu",children:"Select Bus:"}),(0,i.jsx)("input",{list:"buses-list",id:"bus-input",name:"bus-menu",onInput:()=>{for(var t=document.getElementById("bus-input").value,s=document.getElementById("buses-list").children,n=0;n<s.length;n++)s[n].value===t&&e.onBusSelect(t)}}),(0,i.jsx)("datalist",{className:"".concat(l.datalist),id:"buses-list",children:t.map((e=>(0,i.jsx)("option",{className:"".concat(l.option),children:e.number})))})]})}}}]);
//# sourceMappingURL=891.a0b3fc65.chunk.js.map